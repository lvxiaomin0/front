<template>
  <div id="slider">
    <!-- ä¸»è¦åŠ¨ç”»æ•ˆæœï¼šå­—ä½“å’Œè¿›åº¦æ¡ä»¥åŠè¡¨æƒ…éšæƒ…ç»ªç¨‹åº¦ç™¾åˆ†æ¯”å˜åŒ– -->
    <!-- <label for="range" :style="{ color: getHappinessColor }"
      >æƒ…ç»ªç¨‹åº¦: {{ val }}%</label
    > -->
    <!-- æ»‘åŠ¨æ†çš„é¢œè‰²åº”è¯¥ä¸é¢„å…ˆè®¾ç½®å¥½çš„é¢œè‰²è¿›è¡Œç»‘å®šï¼Œé¢œè‰²å¯éšæ„æ›´æ”¹ -->
    <!-- æƒ…ç»ªç¨‹åº¦çš„å€¼ä¹Ÿåº”è¯¥éšvalå€¼å˜åŠ¨ -->
    <input type="range" name="" id="range" min="0" max="100" v-model="val" />

    <!-- æ»‘åŠ¨æ†çš„å€¼åº”è¯¥ä¸valç»‘å®šï¼Œvalå†™å…¥äº†è®¡ç®—å±æ€§,ä¸ºäº†ä¸ä¸‹æ–¹æ»‘åŠ¨æ†å¡«å……é¢œè‰²çš„èŒƒå›´åŒæ­¥ -->
    <div class="slider outer">
      <!-- è®©æˆ‘ä»¬label çš„å®½åº¦ ç­‰äºä»¬æ•°æ®ä¸­å¿ƒ val çš„å®½åº¦,è¿™æ ·å°±ä¼šéšç€æ»‘åŠ¨æ†çš„è¿åŠ¨å¸¦åŠ¨label è¿åŠ¨,è¾¾åˆ°æ›´æ”¹è¡¨æƒ…çš„æ•ˆæœ  -->
      <label
        for=""
        class="slider inner"
        :style="{ width: val + '%', 'border-radius': greaterThanFifty }"
      >
        <span :style="{ right: getPlacement }">{{ getHappiness }}</span>
      </label>
    </div>
  </div>
</template>

<script>
export default {
    name: "Slider",
  data() {
    return {
      val: 70,
      // å…³é”®ç‚¹ï¼ŒåŒæ—¶ç”¨æ¥åŠ¨æ€å…³è”  1ï¼šæƒ…ç»ªç™¾åˆ†æ¯”ï¼Œ2ï¼šæ˜¾ç¤ºå‡ºæ¥çš„æ–‡æœ¬è¡¨æƒ…
    };
  },
  mounted() {
    this.val = Math.floor(Math.random() * 101);
  },
  computed: {
    getPlacement: function () {
      return `${-0.009 * (this.val * -1 + 104)}em`;
      // è·å–ä½ç½®ï¼Œå› ä¸ºæ˜¯è®¡ç®—å±æ€§ï¼Œç›¸å½“äºæ˜¯ä¸valç»‘å®šäº†ï¼Œç»™æœ€ä¸‹æ–¹çš„spanç»‘å®šåå°±ç­‰äºä¸ä¸Šæ–¹ä¸valç»‘å®šçš„widthï¼Œè¿›è¡Œâ€œç»‘å®šâ€
    },
    greaterThanFifty: function () {
      return this.val > 50 ? `var(--roundness)` : `0`;
      // valå€¼å¤§äºäº”åä¹‹åï¼Œè¾¹æ¡†çš„å˜åŒ–ï¼Œå¯ä»¥çœç•¥æˆ–è€…ä¸ç»‘å®šï¼Œä¸å…³é”®
    },
    getHappinessColor: function () {
      return `rgba(255, ${106 + (103 / 100) * this.val}, ${
        Math.floor((this.val * -1) / 7.692) + 13
      }`;
      // è·å–é¢œè‰²çš„å‡½æ•°ï¼Œå¯ä»¥éšæ„æ›´æ”¹æ•°å€¼ï¼Œä¸è¿‡ä¸Šæ–¹é¢œè‰²è¿‡æ¸¡æ›´åŠ è‡ªç„¶
    },
    getHappiness: function () {
      let mood;
      // å°†valå€¼ä¸æ‰€æœ‰è¡¨æƒ…â€œç‰©ç†ç»‘å®šâ€
      if (this.val == 0) {
        mood = "ğŸ¤¬";
      } else if (this.val < 10) {
        mood = "ğŸ˜¡";
      } else if (this.val < 20) {
        mood = "ğŸ˜ ";
      } else if (this.val < 30) {
        mood = "ğŸ˜¦";
      } else if (this.val < 40) {
        mood = "â˜¹ï¸";
      } else if (this.val < 50) {
        mood = "ğŸ™";
      } else if (this.val < 60) {
        mood = "ğŸ˜";
      } else if (this.val < 70) {
        mood = "ğŸ™‚";
      } else if (this.val < 80) {
        mood = "ğŸ˜Š";
      } else if (this.val < 90) {
        mood = "ğŸ˜„";
      } else if (this.val < 100) {
        mood = "ğŸ˜ƒ";
      } else if (this.val == 100) {
        mood = "ğŸ˜";
      }
      return mood;
    },
  },
};
</script>

<style scoped>
* {
  padding: 0;
  margin: 0;
  list-style: none;
}
:root {
  /* å…¨å±€csså˜é‡ */
  --yellow: #ffd100;
  --orange: #ff6a13;
  --darkGray: #53565a;
  --midGray: #888b8d;
  --white: #fff;
}
*,
*::after,
*::before {
  color: var(--darkGray);
  box-sizing: border-box;
}
html,
body {
  width: 100vh;
  height: 100vh;
}
body {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: var(--white);
}
#slider {
  /* å±€éƒ¨csså˜é‡ */
  --roundness: 20px;
  width: 100%;
  max-width: 600px;
  /* outline: 1px dashed red; */
  padding: 4vh;

  /* ç½‘æ ¼å¸ƒå±€ */
  display: grid;
  justify-content: stretch;
}
#slider > label {
  width: 100%;
  font-size: 1.5em;
  padding: 0 0 0.5em;
  margin: auto;
}
#slider input {
  grid-row: 2 / 3;
  grid-column: 1 / 2;
  width: 100%;
  position: relative;
  z-index: 1;
  opacity: 0;
  height: calc(var(--roundness) * 2);
  cursor: pointer;
}
#slider .outer {
  width: 100%;
  height: var(--roundness);
  background-color: var(--midGray);
  border-radius: var(--roundness);
  display: flex;
  align-items: center;
  align-content: center;
  position: relative;
  z-index: 0;
  margin: auto;
  grid-row: 2/3;
  grid-column: 1/2;
}

#slider input:focus + .outer {
  outline: 1px dashed var(--orange);
}

#slider label.inner {
  position: absolute;
  width: 100%;
  height: 100%;
  background: var(--white);
  background: linear-gradient(to left, var(--yellow), var(--orange));
  border-top-left-radius: var(--roundness) !important;
  border-bottom-left-radius: var(--roundness) !important;
  position: absolute;
  transition: all 0.3s cubic-bezier(0.5, 0.4, 0.2, 1);
  text-align: right;
  font-size: calc(var(--roundness) * 2);
  line-height: 1;
}
#slider label.inner span {
  position: absolute;
  right: -2px;
  top: calc(50% - var(--roundness) * 2);
  top: calc(var(--roundness) * -0.3);
  transition: inherit;
}
</style>